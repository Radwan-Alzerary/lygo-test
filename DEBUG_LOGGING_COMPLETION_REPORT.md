# โ ุชู ุฅููุงู ุชุญุณููุงุช Debug Logging ููุธุงู ุงูุฏุฑุฏุดุฉ

## ๐ ููุฎุต ุงูุชุญุฏูุซุงุช ุงูููุฌุฒุฉ

ุชู ุจูุฌุงุญ ุฅุถุงูุฉ ูุธุงู ุดุงูู ูู Debug Logging ูู ุฌููุน ููููุงุช ูุธุงู ุงูุฏุฑุฏุดุฉ ุญุณุจ ุทูุจู.

---

## ๐ง ุงููููุงุช ุงููุญุฏุซุฉ

### 1. **services/chatService.js** 
- โ ุฅุถุงูุฉ Debug logs ุดุงููุฉ ูุฏุงูุฉ `sendMessage`
- โ ูุนุฑู ุชุชุจุน ูุฑูุฏ ููู ุฑุณุงูุฉ (`debugId`)
- โ ููุงุณ ุงูููุช ุงููุณุชุบุฑู ููู ุนูููุฉ
- โ ุชุณุฌูู ุชูุงุตูู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- โ ุชุชุจุน ุญุงูุฉ Redis ูุงูุชุฎุฒูู ุงููุคูุช
- โ ุชุณุฌูู ููุตู ููุฃุฎุทุงุก ูุน ุงูุณูุงู ุงููุงูู

### 2. **services/captainSocketService.js**
- โ ุฅุถุงูุฉ Debug logs ูุฏุงูุฉ `handleSendChatMessage`
- โ ุชุชุจุน ุทูุจุงุช ุฅุฑุณุงู ุงูุฑุณุงุฆู ูู ุงููุงุจุชู
- โ ูุฑุงูุจุฉ ุญุงูุฉ ุงุชุตุงู ุงูุนููุงุก
- โ ุชุณุฌูู ุชูููุชุงุช ุงูุชูููุฐ
- โ ุชุชุจุน ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุนุจุฑ Socket

### 3. **services/customerSocketService.js**
- โ ุฅุถุงูุฉ Debug logs ูุฏุงูุฉ `handleSendChatMessage`
- โ ุชุชุจุน ุทูุจุงุช ุฅุฑุณุงู ุงูุฑุณุงุฆู ูู ุงูุนููู
- โ ูุฑุงูุจุฉ ุญุงูุฉ ุงุชุตุงู ุงููุงุจุชู
- โ ุชุณุฌูู ุชูููุชุงุช ุงูุชูููุฐ
- โ ุชุชุจุน ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุนุจุฑ Socket

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ ุงูููุดุฃุฉ

### 1. **MOBILE_SOCKET_GUIDE.md**
ุฏููู ุดุงูู ููุจุฑูุฌู ุงูููุจุงูู ูุดุฑุญ:
- ููููุฉ ุงูุงุชุตุงู ุจุงูู Socket
- ุงููุตุงุฏูุฉ ูุงูุฃูุงู
- ุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุฑุณุงุฆู
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฃูุซูุฉ ุนูููุฉ

### 2. **CHAT_DEBUG_ENHANCEMENTS.md**
ุชูุซูู ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ:
- ุดุฑุญ ุงูููุฒุงุช ุงููุถุงูุฉ
- ุฃูุซูุฉ ุนูู ุงููุฎุฑุฌุงุช
- ููููุฉ ุงุณุชุฎุฏุงู Debug logs
- ุงูุชูุตูุงุช ููุชุดุบูู

### 3. **test_debug_logging.js**
ููู ุงุฎุชุจุงุฑ ุดุงูู:
- ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุฑุณุงุฆู ุงููุงุจุชู
- ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุฑุณุงุฆู ุงูุนููู
- ุงุฎุชุจุงุฑ ุงูุฑุณุงุฆู ุงูุณุฑูุนุฉ
- ุงุฎุชุจุงุฑ ุงูุฑุณุงุฆู ุงูุฎุงุทุฆุฉ
- ุชุชุจุน ุงุณุชูุจุงู ุงูุฑุณุงุฆู

### 4. **monitor_debug_logs.sh**
Script ููุฑุงูุจุฉ ุงูููุฌุงุช:
- ููุชุฑุฉ ููุฌุงุช ุงูุฏุฑุฏุดุฉ
- ุนุฑุถ ูููู ููุฑุณุงุฆู
- ูุฑุงูุจุฉ ูุจุงุดุฑุฉ
- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ
- ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ ููุนุฑุถ

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุดุบูู ุงูุงุฎุชุจุงุฑ:
```bash
node test_debug_logging.js
```

### 2. ูุฑุงูุจุฉ ุงูููุฌุงุช:
```bash
# ูุฑุงูุจุฉ ูุจุงุดุฑุฉ
./monitor_debug_logs.sh live

# ุนุฑุถ ุฌููุน ููุฌุงุช ุงูุฏุฑุฏุดุฉ
./monitor_debug_logs.sh all

# ุนุฑุถ ุงูุฃุฎุทุงุก ููุท
./monitor_debug_logs.sh errors

# ุนุฑุถ ููุงุณุงุช ุงูุฃุฏุงุก
./monitor_debug_logs.sh performance
```

### 3. ุงูุจุญุซ ุนู ุฑุณุงูุฉ ูุญุฏุฏุฉ:
```bash
# ุชุชุจุน ุฑุณุงูุฉ ุจูุนุฑู ูุนูู
tail -f app.log | grep "msg_1640123456789_abc123"
```

---

## ๐ ูุซุงู ุนูู Debug Logs ุงูุฌุฏูุฏุฉ

```log
[ChatService] [msg_1640123456789_abc123] Starting message processing {
  rideId: '507f1f77bcf86cd799439015',
  senderId: '507f1f77bcf86cd799439013',
  senderType: 'driver',
  messageLength: 25,
  timestamp: '2024-01-15T10:30:45.123Z'
}

[ChatService] [msg_1640123456789_abc123] Rate limit check {
  senderId: '507f1f77bcf86cd799439013',
  passed: true,
  currentRate: 5
}

[ChatService] [msg_1640123456789_abc123] Authorization check {
  senderId: '507f1f77bcf86cd799439013',
  senderType: 'driver',
  isAuthorized: true
}

[ChatService] [msg_1640123456789_abc123] Message saved successfully {
  messageId: '507f1f77bcf86cd799439016',
  processingTime: '45ms'
}

[CaptainSocket] [captain_msg_1640123456789_xyz789] Message sent to customer socket {
  customerSocketId: 'socket_abc123',
  messageId: '507f1f77bcf86cd799439016'
}
```

---

## ๐ก ุงูููุงุฆุฏ ุงููุญููุฉ

### 1. **ุงูุชุดุฎูุต ุงููุชูุฏู**
- ุชุชุจุน ูุณุงุฑ ูู ุฑุณุงูุฉ ูู ุงูุจุฏุงูุฉ ููููุงูุฉ
- ูุนุฑูุฉ ููุงุท ุงููุดู ุจุงูุถุจุท
- ููุงุณ ุฃุฏุงุก ูู ูููู

### 2. **ุงููุฑุงูุจุฉ ุงููุนุงูุฉ**
- ุฅุญุตุงุฆูุงุช ููุตูุฉ ุนู ุงุณุชุฎุฏุงู ุงููุธุงู
- ุชูุจููุงุช ูุจูุฑุฉ ูููุดุงูู
- ุชุญููู ุฃููุงุท ุงูุงุณุชุฎุฏุงู

### 3. **ุชุทููุฑ ุฃุณุฑุน**
- ุงูุชุดุงู ุงูุฃุฎุทุงุก ุจุณุฑุนุฉ
- ููู ุณููู ุงููุธุงู
- ุชุญุณูู ุงูุฃุฏุงุก ุงููุณุชูุฑ

---

## ๐ ูููุทูุฑูู

### ูุนุฑู ุงูุชุชุจุน ุงููุฑูุฏ
ูู ุฑุณุงูุฉ ุชุญุตู ุนูู ูุนุฑู ุชุชุจุน ูุฑูุฏ ูุซู:
- `msg_1640123456789_abc123` ููุฑุณุงุฆู ุงูุนุงุฏูุฉ
- `captain_msg_1640123456789_xyz789` ูุฑุณุงุฆู ุงููุงุจุชู
- `customer_msg_1640123456789_def456` ูุฑุณุงุฆู ุงูุนููู

### ุงูุจุญุซ ูุงูุชุชุจุน
```bash
# ุชุชุจุน ุฑุณุงูุฉ ูุนููุฉ ุนุจุฑ ุฌููุน ุงูููููุงุช
grep "msg_1640123456789_abc123" app.log
```

---

## ๐ฏ ุงููุชูุฌุฉ

ุชู ุจูุฌุงุญ ุฅุถุงูุฉ ูุธุงู Debug Logging ุดุงูู ูููุฑ:

โ **ูุฑุงูุจุฉ ูุงููุฉ** ูุฌููุน ุนูููุงุช ุฅุฑุณุงู ุงูุฑุณุงุฆู  
โ **ุชุดุฎูุต ุฏููู** ููุฃุฎุทุงุก ูุงููุดุงูู  
โ **ููุงุณ ุงูุฃุฏุงุก** ูุฌููุน ุงูุนูููุงุช  
โ **ุชุชุจุน ุงูุฑุณุงุฆู** ูู ุงููุฑุณู ุฅูู ุงููุณุชูุจู  
โ **ุฃุฏูุงุช ูุฑุงูุจุฉ** ุณููุฉ ุงูุงุณุชุฎุฏุงู  
โ **ุฏููู ูููุทูุฑูู** ูุชุทุจููุงุช ุงูููุจุงูู  

ุงูุขู ููููู ุจุณูููุฉ ูุนุฑูุฉ:
- ูู ุฃุฑุณู ุงูุฑุณุงูุฉ ููุชู
- ูู ุงุณุชุบุฑูุช ูุนุงูุฌุฉ ุงูุฑุณุงูุฉ
- ูู ูุตูุช ูููุณุชูุจู ุฃู ูุง
- ูุง ูู ุงูุฃุฎุทุงุก ุงูุชู ุญุฏุซุช ูุฃุณุจุงุจูุง
- ููููุฉ ุชุญุณูู ุงูุฃุฏุงุก

**ูุจุฑูู! ูุธุงู Debug Logging ุงูุฎุงุต ุจุงูุฏุฑุฏุดุฉ ุฌุงูุฒ ููุงุณุชุฎุฏุงู** ๐
